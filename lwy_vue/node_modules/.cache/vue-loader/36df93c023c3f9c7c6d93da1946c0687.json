{"remainingRequest":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Products.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Products.vue","mtime":1591692609784},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\css-loader\\index.js","mtime":1591153667174},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1591153673469},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1591153670902},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1591153673467}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url(../assets/css/products.css);\n",{"version":3,"sources":["Products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA","file":"Products.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"productPage bg_f5f5f5\">\r\n        <bread :breadName=\"['礼物搜索',`${kw?kw:''}`]\"></bread> \r\n        <div class=\"where bg_fff\">\r\n            <div class=\"w1200 center\">\r\n                <where-item   whereTitle=\"场合\" :data=\"data[0]\"></where-item>\r\n                <where-item class=\"borderTop\"  whereTitle=\"对象\" :data=\"data[1]\"></where-item>\r\n                <where-item class=\"borderTop\" whereTitle=\"分类\" :data=\"data[2]\"></where-item>\r\n                <where-item class=\"borderTop\" whereTitle=\"价格\" :data=\"data[3]\"></where-item>\r\n            </div>\r\n        </div> \r\n        <!-- 具体的商品列表 -->\r\n            <!-- 畅销｜ 最新｜ 价格由低到高｜ 价格由高到低 -->\r\n            <div class=\"w1200 where_title d-flex\">\r\n                <div class=\"left\" @click=\"order\">\r\n                    <router-link  class=\"changeRed\" to=\"\" data-id=\"1\" :class=\"orderIndex==1?'orderText':''\">畅销</router-link>\r\n                    <span>|</span>\r\n                    <router-link to=\"\" class=\"changeRed\" data-id=\"2\" :class=\"orderIndex==2?'orderText':''\">最新</router-link>\r\n                    <span>|</span>\r\n                    <router-link to=\"\" class=\"changeRed\" data-id=\"3\" :class=\"orderIndex==3?'orderText':''\">价格由低到高</router-link>\r\n                    <span>|</span>\r\n                    <router-link to=\"\" class=\"changeRed\" data-id=\"4\" :class=\"orderIndex==4?'orderText':''\">价格由高到低</router-link>\r\n                </div>\r\n                <div class=\"right\">\r\n                    <a href=\"javascript:;\" class=\"block\" @click=\"isDiy=!isDiy\" v-text=\"isDiy?'√':''\"></a>仅显示可定制商品\r\n                </div>\r\n            </div>\r\n            <ul class=\"w1200 proList\">\r\n                <li v-for=\"(item,index) of newProList\" :key=\"index\">\r\n                    <router-link :to=\"/Details/+item.pid\">\r\n                            <img :src=\"imgUrl+item.md\" alt=\"\">\r\n                    </router-link>\r\n                    <p class=\"title mt20\">\r\n                        <router-link class=\"changeRed\" v-text=\"item.title\" :to=\"/Details/+item.pid\"></router-link>\r\n                    </p>\r\n                    <p v-text=\"'¥'+item.price.toFixed(2)\"></p>\r\n                    <p class=\"mt20 font12\">\r\n                        <a v-if=\"item.isDiy\" class=\"font12\" :class=\"item['diyClass']\" href=\"javascript:;\" @click=\"clickDiy(index)\">可定制</a>\r\n                        <span>5人评价</span>\r\n                    </p>\r\n                </li>\r\n            </ul>\r\n                <!-- 页码 -->\r\n            <div class=\"pagers w1200\">\r\n                <a :class=\"pno==0?'':'prevHover'\" disabled=\"true\" class=\"prev\" href=\"javascript:;\" @click=\"prevNext(-1)\"></a>\r\n                <a  v-for=\"i of pageCount\" :class=\"pno==i-1?'pnoActive':''\" :key=\"i\" class=\"pager\" href=\"javascript:;\" v-text=\"i\" @click=\"toPage(i)\"></a>\r\n                <a :class=\"pno==pageCount-1?'':'nextHover'\" class=\"next\" @click=\"prevNext(1)\" href=\"javascript:;\"></a>\r\n            </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport WhereItem from '../components/product/WhereItem.vue'\r\nimport { inherits } from 'util';\r\nexport default {\r\n    data(){\r\n        return {\r\n          //搜索条件f1的数据\r\n          data:[['全部','生日','结婚','订婚','表白','纪念日','本命年','乔迁',\r\n          '晋升','分别','毕业','答谢','祝贺','致歉','约会','见面','会议','拜访','年会','福利'],\r\n          ['全部','男朋友','女朋友','男生','女生','老公','老婆','兄弟','姐妹','闺蜜','父亲',\r\n           '母亲','男士','女士','老师','长辈','孩子','同事','客户','领导','学生','外国人','自己'],\r\n          ['全部','创意','定制','星座','音乐','浪漫','吃货','爱车','烟民','办公','养生','潮人','运动','家居','酒茶','实用'],\r\n          ['全部','100以下','100-200','200-300','300-500','500以上']],\r\n        //   是否选择了仅显示定制商品\r\n          isDiy:false,\r\n          orderIndex:-1,\r\n          proList:[],\r\n          newProList:[],//用于筛选条件\r\n          pno:0,\r\n          pageCount:0,\r\n          imgUrl:\"http://127.0.0.1:5050/\",\r\n          diyIndex:-1,\r\n          diyClass:{active:false},\r\n          diyClassList:[{active:false},{active:false},{active:false},{active:false},{active:false}]\r\n        }\r\n    },\r\n    props:[\"kw\"],\r\n    components:{'where-item':WhereItem},\r\n    created(){\r\n        this.loadMore();\r\n        console.log('kw'+this.kw);\r\n    },\r\n    methods:{\r\n       loadMore(pno=0){\r\n           (async ()=>{\r\n               var res=await this.axios.get('product/pros',{\r\n                   params:{\r\n                       pno  ,//要查询第几页\r\n                       kw:this.kw\r\n                   }\r\n               });\r\n               console.log(res.data);\r\n               this.newProList=this.proList=res.data.data;\r\n               for(var i=0;i<this.newProList.length;i++){\r\n                   this.$set(this.newProList[i],\"diyClass\",{active:false});\r\n               }\r\n               this.pno=res.data.pno;\r\n               this.pageCount=res.data.pageCount;\r\n               console.log(this.proList,this.pno,this.pageCount);\r\n           })();\r\n       } ,\r\n        //    排序方式\r\n        order(e){\r\n            if(e.target.nodeName==\"A\"){\r\n                this.orderIndex=e.target.dataset.id; \r\n                // if(this.orderIndex==3){\r\n                //     this.newProList.sort((a,b)=>a.price-b.price);\r\n                // }\r\n            }\r\n        },\r\n    //    点击每个商品上的可定制按钮 触发的事件\r\n       clickDiy(i){\r\n           console.log(i);\r\n           this.newProList[i].diyClass.active=!this.newProList[i].diyClass.active;\r\n       },\r\n    //    分页跳转\r\n    toPage(i){\r\n        this.pno=i-1;\r\n        this.loadMore(i-1);\r\n        console.log(this.pno,i);\r\n    },\r\n    // 点击两边的上一页 下一页\r\n    prevNext(p){\r\n        if(p==-1 && this.pno==0 || p==1 && this.pno==(this.pageCount-1)){\r\n            return;\r\n        }\r\n        p+=parseInt(this.pno);\r\n        this.pno=p;\r\n        this.loadMore(p);\r\n    }\r\n    },\r\n    watch:{\r\n        // 只要地址栏参数发生改变\r\n        // $route(){\r\n        //     // 就重新查询\r\n        //     console.log(this.kw);\r\n        // }\r\n    },\r\n    // 从product页面跳转到detail页面 让product缓存 从detail页面再回来时，就不用重新请求数据了\r\n    beforeRouteLeave(to,from,next){\r\n        if(to.name==\"detail\"){\r\n            from.meta.keepAlive=true;\r\n        }else{\r\n            from.meta.keepAlive=false;\r\n        }\r\n        next();\r\n    },\r\n    // 从detail页面再回来时，设置product页面缓存\r\n    beforeRouteEnter(to,from,next){\r\n        if(from.name==\"detail\"){\r\n            to.meta.keepAlive=true;\r\n        }else{\r\n            to.meta.keepAlive=false;\r\n        }\r\n        next();\r\n    }\r\n}\r\n</script>\r\n<style>\r\n     @import url(../assets/css/products.css);\r\n</style>\r\n\r\n"]}]}