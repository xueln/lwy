{"remainingRequest":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Register.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Register.vue","mtime":1591873516009},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\css-loader\\index.js","mtime":1591153667174},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1591153673469},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1591153670902},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1591153673467}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url(../assets/css/register.css);\n",{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div id=\"regContent\">\r\n        <h2>注册礼无忧账号</h2> \r\n        <input  @blur=\"blurPhoneHandle\" placeholder=\"请输入手机号\" v-model=\"phone\">\r\n        <div v-text=\"reg_phone\"></div>\r\n        <input @blur=\"blurPwdHandle\" type=\"password\" placeholder=\"请输入密码6-12位(字母+数字)\" v-model=\"pwd\">\r\n        <div v-text=\"reg_pwd\"></div>\r\n        <input @blur=\"blurPwd2Handle\" type=\"password\" placeholder=\"再次输入密码\" v-model=\"pwd2\">\r\n        <div v-text=\"reg_pwd2\"></div>\r\n        <p>\r\n            注册即为同意\r\n            <a href=\"javascript:;\">《礼无忧用户注册协议》</a>\r\n        </p>\r\n        <input @click=\"regNowHandle\" type=\"button\" value=\"立即注册\" id=\"reg\">\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport QS from 'qs'\r\nimport { async } from 'q';\r\nimport {iphoneLogin,iphoneReg} from '../assets/js/interface'\r\nexport default {\r\n    data(){\r\n        return{\r\n            phone:\"\",\r\n            pwd:\"\",\r\n            pwd2:\"\",\r\n            reg_phone:\"\",\r\n            reg_pwd:\"\",\r\n            reg_pwd2:\"\",\r\n            regAlready:false\r\n        }\r\n    },\r\n    methods:{\r\n        getPhone(){\r\n            (async ()=>{\r\n                var res=await iphoneLogin({iphone:this.iphone});\r\n                if(res.code==-1){\r\n                    this.reg_phone=\"该手机号已被注册\";\r\n                    this.regAlready=true;\r\n                }\r\n            })();\r\n\r\n        },\r\n        blurPhoneHandle(){\r\n            var reg1=/^1[3-9]\\d{9}$/;\r\n            var isCorrect=reg1.test(this.phone);\r\n            // console.log(this.phone,isCorrect);\r\n            if(!isCorrect){\r\n                this.reg_phone=\"手机号格式不正确\";\r\n                return false;\r\n            }else{\r\n                // 验证用户手机号是否被使用\r\n                this.getPhone();\r\n                if(this.regAlready==false){\r\n                   this.reg_phone=\"\";\r\n                   return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n                \r\n            } \r\n        },\r\n        blurPwdHandle(){\r\n            var reg=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$/;\r\n            if(!reg.test(this.pwd)){\r\n                this.reg_pwd=\"请输入正确格式的密码(6~12位 数字+字母)\";\r\n                return false;\r\n            }else{\r\n                console.log(this.pwd);\r\n                this.reg_pwd=\"\";\r\n                return true;\r\n            } \r\n        },\r\n        blurPwd2Handle(){\r\n            var pwd2=this.pwd2.replace(/[a-z]/ig,(kw)=>{\r\n                return kw.toUpperCase();\r\n            });\r\n            var pwd=this.pwd.replace(/[a-z]/ig,(kw)=>{\r\n                return kw.toUpperCase();\r\n            });\r\n            if(pwd2!==pwd){\r\n                this.reg_pwd2=\"两次输入密码不一致\";\r\n                return false;\r\n            }else{\r\n                this.reg_pwd2=\"\";\r\n                return true;\r\n            }\r\n        },\r\n        // 立即注册单击事件\r\n        regNowHandle(){\r\n            if(this.blurPhoneHandle() && this.blurPwdHandle() &&  this.blurPwd2Handle()){\r\n                console.log(this.phone,this.pwd);\r\n                (async ()=>{\r\n                    var res=await iphoneReg({\r\n                            iphone:this.phone,\r\n                            upwd:this.pwd2\r\n                    });\r\n                    if(res.code==200){\r\n                      alert(\"注册成功！欢迎您\"+this.phone); \r\n                    //   自动登录\r\n                    var loginRes=await iphoneLogin({\r\n                        iphone:this.phone,\r\n                        upwd:this.pwd2\r\n                    });\r\n                    if(loginRes.code==1){\r\n                        this.$router.push('/Index');\r\n                    }else{\r\n                        alert('登录失败,请稍后再试');\r\n                    }\r\n                       \r\n                    }\r\n                })();\r\n            }\r\n\r\n        }\r\n    },\r\n    created(){\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    @import url(../assets/css/register.css);\r\n</style>\r\n\r\n"]}]}