{"remainingRequest":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Cart.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Cart.vue","mtime":1591586477518},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\css-loader\\index.js","mtime":1591153667174},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1591153673469},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1591153670902},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1591153673467}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url(../assets/css/cart.css);\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"cart_page bg_f5f5f5\">\r\n        <!-- 顶部导航栏 -->\r\n        <div class=\"top_nav bg_fff\">\r\n            <div class=\"center w1200  d-flex\">\r\n                <div class=\"title\">\r\n                    <router-link to=\"/\" class=\"block\" id=\"logo_icon\"></router-link>\r\n                    <span>我的购物车</span>\r\n                </div>\r\n                <ul class=\"d-flex\">\r\n                    <li v-show=\"getIsLogin\">\r\n                        <span v-text=\"getuserInfo.unum\"></span>     \r\n                    </li>\r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">个人中心</router-link>\r\n                    </li>\r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">我的订单</router-link>\r\n                    </li>\r\n                    <li v-show=\"!getIsLogin\">\r\n                        <router-link to=\"/Login\" class=\"changeRed\">登录</router-link> /\r\n                        <router-link to=\"/Register\" class=\"changeRed\">注册</router-link>\r\n                    </li>\r\n                    <li>\r\n                        <router-link to=\"\" class=\"changeRed\">浏览历史</router-link>\r\n                    </li>    \r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">退出登录</router-link>\r\n                    </li>    \r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <!-- 面包屑 -->\r\n        <bread :breadName=\"['购物车']\"></bread>\r\n        <!-- 购物车中没有商品时显示 -->\r\n        <div v-if=\"getCount==0\" class=\"cartEmpty w1200 bg_fff\">\r\n            <p>购物车中没有礼物</p>\r\n            <p>\r\n                <router-link class=\"changeRed\" to=\"/Products\">继续购物</router-link>\r\n            </p>\r\n        </div>\r\n        <!-- 有商品时的显示 -->\r\n        <div v-else class=\"cartList w1200 bg_fff\">\r\n            <ul class=\"d-flex\">\r\n                <li>商品信息</li>\r\n                <li>单价</li>\r\n                <li>数量</li>\r\n                <li>库存</li>\r\n                <li>小计</li>\r\n                <li>\r\n                    全选<input type=\"checkbox\" :checked=\"this.getIsAllCheck\" @change=\"allCheckChange\">\r\n                </li>\r\n            </ul>\r\n            <ul class=\"detail\">\r\n                <li v-for=\"(item,index) of list\" :key=\"index\" class=\"d-flex\">\r\n                    <div class=\"d-flex\">\r\n                        <router-link :to=\"'/Details/'+item.pid\">\r\n                            <img :src=\"imgUrl+item.pic\" alt=\"\">\r\n                        </router-link>\r\n                        <p>\r\n                            <router-link to=\"\" v-text=\"item.title\"></router-link>\r\n                            <span class=\"block2 color666 font12\" v-if=\"item.color\">{{'礼物款式:'+item.color}}</span>\r\n                            <span class=\"block2 color666 font12\">礼物款式:{{item.spec}}</span>\r\n                        </p>\r\n                    </div>\r\n                    <div>¥{{item.price | priceFilter}}</div>\r\n                    <div>\r\n                        \r\n                        <cart-btn :count=\"item.count\" :i=\"index\" :list=\"list\"></cart-btn>\r\n                        <!-- <a href=\"javascript:;\" @click.prevent=\"countChange($event,-1)\" :data-i=\"index\"></a>\r\n                        <input type=\"text\" v-model=\"item.count\">\r\n                        <a href=\"javascript:;\" @click.prevent=\"countChange($event,1)\" :data-i=\"index\"></a> -->\r\n                        \r\n                    </div>\r\n                    <div v-text=\"item['is_spot']?'有库存':'无库存'\"></div>\r\n                    <div>¥{{item.price*item.count | priceFilter}}</div>\r\n                    <div>\r\n                        <!-- <a href=\"javascript:;\" data-i=\"index\" id=\"del\"></a> -->\r\n                        <input type=\"checkbox\" :checked=\"getCheckStatus[item.cid]\" @change=\"statusChange(item.cid)\">\r\n                    </div> \r\n                </li>\r\n            </ul>\r\n            <!-- 结算 -->\r\n            <div class=\"cart_total d-flex\">\r\n                <router-link to=\"\" class=\"changeRed\">\r\n                    <i></i>\r\n                    继续购物\r\n                </router-link>\r\n                <div class=\"right d-flex\">\r\n                    <span class=\"font16\" v-text=\"`共${getSelectCount}件商品`\"></span>\r\n                    <span class=\"font16\">合计：\r\n                        <b>¥ {{getSelectTotal | priceFilter}}</b>\r\n                    </span>\r\n                    <router-link to=\"\" class=\"changeRed font16\">去结算</router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <my-footer></my-footer>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapGetters,mapActions, mapMutations} from 'vuex';\r\nimport CartBtn from '../components/cart/CartBtn.vue'\r\nexport default {\r\n    data(){\r\n        return {\r\n            list:[],\r\n            imgUrl:'http://127.0.0.1:5050/',\r\n            // 商品勾选值\r\n            checkedList:[],\r\n            allCheck:true\r\n        }\r\n    },\r\n    methods:{\r\n        ...mapActions([\"cartInit\",\"addCart\",\"changeCart\",\"del\",\"checkedInit\"]),\r\n        ...mapMutations([\"setAllCheck\",\"changeStatus\"]),\r\n        // 购物车数量单击按钮事件\r\n        countChange(e,val){\r\n            var i=parseInt(e.target.dataset.i);\r\n            var count=this.list[i].count;\r\n            count+=val;\r\n            console.log(count);\r\n            if(count<=0){\r\n                // 应该执行删除操作\r\n                console.log(\"应该执行删除操作\");\r\n                this.del({cid:this.list[i].cid,i:i});\r\n                \r\n            }else{\r\n               if(count>=40){\r\n                    count=40;\r\n                } \r\n            // 将修改更新到vuex中\r\n            this.changeCart({cid:this.list[i].cid,count});\r\n            }\r\n\r\n        },\r\n        allCheckChange(){\r\n            this.setAllCheck(!this.getIsAllCheck);\r\n        },\r\n        statusChange(cid){\r\n            this.changeStatus(cid);\r\n            console.log(this.getIsAllCheck);\r\n            // this.allCheck=this.getIsAllCheck;\r\n            // console.log(this.getCheckStatus);\r\n        },\r\n        loadMore(){\r\n            // 从vuex中拿到购物车数据\r\n            this.list=this.getCartList;\r\n            // console.log(this.list[0].color);\r\n        },\r\n        \r\n    },\r\n    created(){\r\n        // 初始化cart的state\r\n        (async ()=>{\r\n            await this.cartInit();\r\n            this.checkedInit();\r\n            // console.log(this.getIsAllCheck);\r\n            // console.log(this.getIsLogin);\r\n            // 用户是否登录？登录状态查询当前浏览器中cartProducts是否有信息？\r\n            // 浏览器端有存储信息 将存储信息中的\r\n            this.loadMore();\r\n        })();\r\n        \r\n    },\r\n    computed:{\r\n        ...mapGetters([\"getIsLogin\",\"getuserInfo\",\"getCartList\",\"getCount\",\"getCheckStatus\",\"getIsAllCheck\",\"getSelectCount\",\"getSelectTotal\"]),\r\n        total(){\r\n            return this.list.reduce((prev,value)=>{\r\n                prev+=value.price*value.count;\r\n                return prev;\r\n            },0);\r\n        }\r\n    },\r\n    wacth:{\r\n        // \r\n    },\r\n    components:{'cart-btn':CartBtn}\r\n}\r\n</script>\r\n<style>\r\n    @import url(../assets/css/cart.css);\r\n</style>\r\n\r\n"]}]}