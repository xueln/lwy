{"remainingRequest":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\views\\Cart.vue","mtime":1591786925165},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1591153664766},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1591153673467}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\WEB\\\\lx\\\\vue\\\\project\\\\lwy\\\\lwy_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\WEB\\\\lx\\\\vue\\\\project\\\\lwy\\\\lwy_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions, mapMutations } from 'vuex';\nimport CartBtn from \"../components/cart/CartBtn.vue\";\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      imgUrl: 'http://127.0.0.1:5050/',\n      // 商品勾选值\n      checkedList: [],\n      allCheck: true\n    };\n  },\n  methods: _objectSpread({}, mapActions([\"cartInit\", \"addCart\", \"changeCart\", \"del\", \"checkedInit\"]), {}, mapMutations([\"setAllCheck\", \"changeStatus\"]), {\n    // 购物车数量单击按钮事件\n    countChange: function countChange(e, val) {\n      var i = parseInt(e.target.dataset.i);\n      var count = this.list[i].count;\n      count += val;\n      console.log(count);\n\n      if (count <= 0) {\n        // 应该执行删除操作\n        console.log(\"应该执行删除操作\");\n        this.del({\n          cid: this.list[i].cid,\n          i: i\n        });\n      } else {\n        if (count >= 40) {\n          count = 40;\n        } // 将修改更新到vuex中\n\n\n        this.changeCart({\n          cid: this.list[i].cid,\n          count: count\n        });\n      }\n    },\n    allCheckChange: function allCheckChange() {\n      this.setAllCheck(!this.getIsAllCheck);\n    },\n    statusChange: function statusChange(cid) {\n      this.changeStatus(cid);\n      console.log(this.getIsAllCheck); // this.allCheck=this.getIsAllCheck;\n      // console.log(this.getCheckStatus);\n    },\n    loadMore: function loadMore() {\n      // 从vuex中拿到购物车数据\n      this.list = this.getCartList; // console.log(this.list[0].color);\n    }\n  }),\n  created: function created() {\n    var _this = this;\n\n    // 初始化cart的state\n    _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.cartInit();\n\n            case 2:\n              _this.checkedInit(); // console.log(this.getIsAllCheck);\n              // console.log(this.getIsLogin);\n              // 用户是否登录？登录状态查询当前浏览器中cartProducts是否有信息？\n              // 浏览器端有存储信息 将存储信息中的\n\n\n              _this.loadMore();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  computed: _objectSpread({}, mapGetters([\"getIsLogin\", \"getuserInfo\", \"getCartList\", \"getCount\", \"getCheckStatus\", \"getIsAllCheck\", \"getSelectCount\", \"getSelectTotal\"]), {\n    total: function total() {\n      return this.list.reduce(function (prev, value) {\n        prev += value.price * value.count;\n        return prev;\n      }, 0);\n    }\n  }),\n  wacth: {// \n  },\n  components: {\n    'cart-btn': CartBtn\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"cart_page bg_f5f5f5\">\r\n        <!-- 顶部导航栏 -->\r\n        <div class=\"top_nav bg_fff\">\r\n            <div class=\"center w1200  d-flex\">\r\n                <div class=\"title\">\r\n                    <router-link to=\"/\" class=\"block\" id=\"logo_icon\"></router-link>\r\n                    <span>我的购物车</span>\r\n                </div>\r\n                <ul class=\"d-flex\">\r\n                    <li v-show=\"getIsLogin\">\r\n                        <span v-text=\"getuserInfo.unum\"></span>     \r\n                    </li>\r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">个人中心</router-link>\r\n                    </li>\r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">我的订单</router-link>\r\n                    </li>\r\n                    <li v-show=\"!getIsLogin\">\r\n                        <router-link to=\"/Login\" class=\"changeRed\">登录</router-link> /\r\n                        <router-link to=\"/Register\" class=\"changeRed\">注册</router-link>\r\n                    </li>\r\n                    <li>\r\n                        <router-link to=\"\" class=\"changeRed\">浏览历史</router-link>\r\n                    </li>    \r\n                    <li v-show=\"getIsLogin\">\r\n                        <router-link to=\"\" class=\"changeRed\">退出登录</router-link>\r\n                    </li>    \r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <!-- 面包屑 -->\r\n        <bread :breadName=\"['购物车']\"></bread>\r\n        <!-- 购物车中没有商品时显示 -->\r\n        <div v-if=\"getCount==0\" class=\"cartEmpty w1200 bg_fff\">\r\n            <p>购物车中没有礼物</p>\r\n            <p>\r\n                <router-link class=\"changeRed\" to=\"/Products\">继续购物</router-link>\r\n            </p>\r\n        </div>\r\n        <!-- 有商品时的显示 -->\r\n        <div v-else class=\"cartList w1200 bg_fff\">\r\n            <ul class=\"d-flex\">\r\n                <li>商品信息</li>\r\n                <li>单价</li>\r\n                <li>数量</li>\r\n                <li>库存</li>\r\n                <li>小计</li>\r\n                <li>\r\n                    全选<input type=\"checkbox\" :checked=\"this.getIsAllCheck\" @change=\"allCheckChange\">\r\n                </li>\r\n            </ul>\r\n            <ul class=\"detail\">\r\n                <li v-for=\"(item,index) of list\" :key=\"index\" class=\"d-flex\">\r\n                    <div class=\"d-flex\">\r\n                        <router-link :to=\"'/Details/'+item.pid\">\r\n                            <img :src=\"imgUrl+item.pic\" alt=\"\">\r\n                        </router-link>\r\n                        <p>\r\n                            <router-link to=\"\" v-text=\"item.title\"></router-link>\r\n                            <span class=\"block2 color666 font12\" v-if=\"item.color\">{{'礼物款式:'+item.color}}</span>\r\n                            <span class=\"block2 color666 font12\">礼物款式:{{item.spec}}</span>\r\n                        </p>\r\n                    </div>\r\n                    <div>¥{{item.price | priceFilter}}</div>\r\n                    <div>\r\n                        \r\n                        <cart-btn :count=\"item.count\" :i=\"index\" :list=\"list\"></cart-btn>\r\n                        <!-- <a href=\"javascript:;\" @click.prevent=\"countChange($event,-1)\" :data-i=\"index\"></a>\r\n                        <input type=\"text\" v-model=\"item.count\">\r\n                        <a href=\"javascript:;\" @click.prevent=\"countChange($event,1)\" :data-i=\"index\"></a> -->\r\n                        \r\n                    </div>\r\n                    <div v-text=\"item['is_spot']?'有库存':'无库存'\"></div>\r\n                    <div>¥{{item.price*item.count | priceFilter}}</div>\r\n                    <div>\r\n                        <!-- <a href=\"javascript:;\" data-i=\"index\" id=\"del\"></a> -->\r\n                        <input type=\"checkbox\" :checked=\"getCheckStatus[item.cid]\" @change=\"statusChange(item.cid)\">\r\n                    </div> \r\n                </li>\r\n            </ul>\r\n            <!-- 结算 -->\r\n            <div class=\"cart_total d-flex\">\r\n                <router-link to=\"\" class=\"changeRed\">\r\n                    <i></i>\r\n                    继续购物\r\n                </router-link>\r\n                <div class=\"right d-flex\">\r\n                    <span class=\"font16\" v-text=\"`共${getSelectCount}件商品`\"></span>\r\n                    <span class=\"font16\">合计：\r\n                        <b>¥ {{getSelectTotal | priceFilter}}</b>\r\n                    </span>\r\n                    <router-link to=\"\" class=\"changeRed font16\">去结算</router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <my-footer></my-footer>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapGetters,mapActions, mapMutations} from 'vuex';\r\nimport CartBtn from '../components/cart/CartBtn.vue'\r\nexport default {\r\n    data(){\r\n        return {\r\n            list:[],\r\n            imgUrl:'http://127.0.0.1:5050/',\r\n            // 商品勾选值\r\n            checkedList:[],\r\n            allCheck:true\r\n        }\r\n    },\r\n    methods:{\r\n        ...mapActions([\"cartInit\",\"addCart\",\"changeCart\",\"del\",\"checkedInit\"]),\r\n        ...mapMutations([\"setAllCheck\",\"changeStatus\"]),\r\n        // 购物车数量单击按钮事件\r\n        countChange(e,val){\r\n            var i=parseInt(e.target.dataset.i);\r\n            var count=this.list[i].count;\r\n            count+=val;\r\n            console.log(count);\r\n            if(count<=0){\r\n                // 应该执行删除操作\r\n                console.log(\"应该执行删除操作\");\r\n                this.del({cid:this.list[i].cid,i:i});\r\n                \r\n            }else{\r\n               if(count>=40){\r\n                    count=40;\r\n                } \r\n            // 将修改更新到vuex中\r\n            this.changeCart({cid:this.list[i].cid,count});\r\n            }\r\n\r\n        },\r\n        allCheckChange(){\r\n            this.setAllCheck(!this.getIsAllCheck);\r\n        },\r\n        statusChange(cid){\r\n            this.changeStatus(cid);\r\n            console.log(this.getIsAllCheck);\r\n            // this.allCheck=this.getIsAllCheck;\r\n            // console.log(this.getCheckStatus);\r\n        },\r\n        loadMore(){\r\n            // 从vuex中拿到购物车数据\r\n            this.list=this.getCartList;\r\n            // console.log(this.list[0].color);\r\n        },\r\n        \r\n    },\r\n    created(){\r\n        // 初始化cart的state\r\n        (async ()=>{\r\n            await this.cartInit();\r\n            this.checkedInit();\r\n            // console.log(this.getIsAllCheck);\r\n            // console.log(this.getIsLogin);\r\n            // 用户是否登录？登录状态查询当前浏览器中cartProducts是否有信息？\r\n            // 浏览器端有存储信息 将存储信息中的\r\n            this.loadMore();\r\n        })();\r\n        \r\n    },\r\n    computed:{\r\n        ...mapGetters([\"getIsLogin\",\"getuserInfo\",\"getCartList\",\"getCount\",\"getCheckStatus\",\"getIsAllCheck\",\"getSelectCount\",\"getSelectTotal\"]),\r\n        total(){\r\n            return this.list.reduce((prev,value)=>{\r\n                prev+=value.price*value.count;\r\n                return prev;\r\n            },0);\r\n        }\r\n    },\r\n    wacth:{\r\n        // \r\n    },\r\n    components:{'cart-btn':CartBtn}\r\n}\r\n</script>\r\n<style>\r\n    @import url(../assets/css/cart.css);\r\n</style>\r\n\r\n"],"sourceRoot":"src/views"}]}