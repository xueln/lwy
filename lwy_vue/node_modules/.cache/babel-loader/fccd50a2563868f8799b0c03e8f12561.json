{"remainingRequest":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\store\\userLogin.js","dependencies":[{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\store\\userLogin.js","mtime":1591878261074},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591153665092},{"path":"D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1591153664766}],"contextDependencies":[],"result":["import _typeof from \"D:\\\\WEB\\\\lx\\\\vue\\\\project\\\\lwy\\\\lwy_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\WEB\\\\lx\\\\vue\\\\project\\\\lwy\\\\lwy_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport { iphoneLogin, userLogout } from \"../assets/js/interface\";\nexport default {\n  state: {\n    islogin: JSON.parse(sessionStorage.getItem(\"islogin\")) || false,\n    userInfo: JSON.parse(sessionStorage.getItem(\"userInfo\")) || {},\n    token: sessionStorage.getItem(\"token\")\n  },\n  getters: {\n    getIsLogin: function getIsLogin(state) {\n      return state.islogin;\n    },\n    getuserInfo: function getuserInfo(state) {\n      return state.userInfo;\n    },\n    getToken: function getToken(state) {\n      return state.token;\n    }\n  },\n  mutations: {\n    setIsLogin: function setIsLogin(state, b) {\n      state.islogin = b;\n      sessionStorage.setItem(\"islogin\", JSON.stringify(b));\n    },\n    setuserInfo: function setuserInfo(state, info) {\n      state.userInfo = info;\n      sessionStorage.setItem(\"userInfo\", JSON.stringify(info));\n    },\n    logout: function logout(state) {\n      state.islogin = false;\n      state.userInfo = {};\n      state.token = null;\n      sessionStorage.removeItem(\"islogin\");\n      sessionStorage.removeItem(\"userInfo\");\n      sessionStorage.removeItem(\"token\");\n    },\n    setToken: function setToken(state, token) {\n      state.token = token;\n      sessionStorage.setItem(\"token\", token);\n    },\n    clearToken: function clearToken(state) {\n      state.token = null;\n      sessionStorage.removeItem(\"token\");\n    }\n  },\n  actions: {\n    userLogin: function () {\n      var _userLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(context, user) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return iphoneLogin(user);\n\n              case 2:\n                res = _context.sent;\n                console.log(res);\n\n                if (!(res.code == 1)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                console.log(\"登录成功啦\");\n                console.log(_typeof(context.state.token));\n                context.commit(\"setIsLogin\", true);\n                context.commit(\"setuserInfo\", res.data[0]);\n                return _context.abrupt(\"return\", true);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function userLogin(_x, _x2) {\n        return _userLogin.apply(this, arguments);\n      }\n\n      return userLogin;\n    }(),\n    userLogout: function userLogout(_ref) {\n      var commit = _ref.commit;\n      commit(\"logout\");\n    }\n  }\n};",{"version":3,"sources":["D:\\WEB\\lx\\vue\\project\\lwy\\lwy_vue\\src\\store\\userLogin.js"],"names":["iphoneLogin","userLogout","state","islogin","JSON","parse","sessionStorage","getItem","userInfo","token","getters","getIsLogin","getuserInfo","getToken","mutations","setIsLogin","b","setItem","stringify","setuserInfo","info","logout","removeItem","setToken","clearToken","actions","userLogin","context","user","res","console","log","code","commit","data"],"mappings":"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","sourcesContent":["import { iphoneLogin,userLogout } from '../assets/js/interface';\r\nexport default{\r\n    state:{\r\n        islogin:JSON.parse(sessionStorage.getItem(\"islogin\")) || false,\r\n        userInfo:JSON.parse(sessionStorage.getItem(\"userInfo\")) || {},\r\n        token:sessionStorage.getItem(\"token\")\r\n    },\r\n    getters:{\r\n        getIsLogin(state){\r\n            return state.islogin;\r\n        },\r\n        getuserInfo(state){\r\n            return state.userInfo;\r\n        },\r\n        getToken(state){\r\n            return state.token;\r\n        }\r\n    },\r\n    mutations:{\r\n        setIsLogin(state,b){\r\n            state.islogin=b;\r\n            sessionStorage.setItem(\"islogin\",JSON.stringify(b));\r\n        },\r\n        setuserInfo(state,info){\r\n            state.userInfo=info;\r\n            sessionStorage.setItem(\"userInfo\",JSON.stringify(info));\r\n        } ,\r\n        logout(state){\r\n            state.islogin=false;\r\n            state.userInfo={};\r\n            state.token=null;\r\n            sessionStorage.removeItem(\"islogin\");\r\n            sessionStorage.removeItem(\"userInfo\");\r\n            sessionStorage.removeItem(\"token\");\r\n        } ,\r\n        setToken(state,token){\r\n            state.token=token;\r\n            sessionStorage.setItem(\"token\",token);\r\n        },\r\n        clearToken(state){\r\n            state.token=null;\r\n            sessionStorage.removeItem(\"token\");\r\n        }\r\n    },\r\n    actions:{\r\n        async userLogin(context,user){\r\n            var res=await iphoneLogin(user);\r\n            console.log(res);\r\n            if(res.code==1){\r\n                console.log(\"登录成功啦\");\r\n                console.log(typeof context.state.token);\r\n                context.commit(\"setIsLogin\",true);\r\n                context.commit(\"setuserInfo\",res.data[0]);\r\n                return true;\r\n            }\r\n        },\r\n        userLogout({commit}){\r\n            commit(\"logout\");\r\n        }\r\n    }\r\n}"]}]}